<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>è¡Œä¸ºæ¨¡å¼ | AlfredNing</title><meta name=keywords content><meta name=description content="å®šä¹‰ å…³æ³¨ç‚¹åœ¨äºâ€œæ€æ ·è¿è¡Œå¯¹è±¡å’Œç±»â€ ç”¨æˆ·æè¿°ç¨‹åºåœ¨è¿è¡Œæ—¶å¤æ‚çš„æµç¨‹æ§åˆ¶ ç±»è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»§æ‰¿æœºåˆ¶ï¼Œå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»„åˆæˆ–èšåˆåœ¨å¯¹è±¡ä¹‹é—´åˆ†é…è¡Œä¸º æ¨¡æ¿æ–¹æ³•æ¨¡å¼ å®šä¹‰ç®—æ³•æ¡†æ¶ï¼Œç®—æ³•å…·ä½“æ¶‰åŠçš„ç›¸å…³æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼å…è®¸åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å­ç±»æ¥é‡æ–°å®šä¹‰ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ã€‚
è§’è‰² æ¨¡æ¿ç±» å…·ä½“å­ç±» é€‚ç”¨åœºæ™¯ å½“æœ‰ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶éœ€è¦ç¨³å®šä¸å˜ï¼Œä½†å…¶ä¸­çš„æŸäº›æ­¥éª¤éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œå®šåˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚ å½“å¸Œæœ›é€šè¿‡å­ç±»æ¥æ‰©å±•ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç®—æ³•æ—¶ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚ Springçš„BeanFactory, Javaçš„Servlet å®ç° package design_patterns; /** * æ¨¡æ¿æ–¹æ³•æ¨¡å¼ * * @author Alfred.Ning * @since 2023å¹´08æœˆ03æ—¥ 10:32:00 */ public class TemplateMethodMain { public static void main(String[] args) { Chess chess = new Chess(); chess.play(); new Monopoly().play(); } } // æ¨¡æ¿ç±» abstract class Game { abstract void initialize(); abstract void startGame(); abstract void endGame(); public final void play() { initialize(); startGame(); endGame(); } } // å…·ä½“æ¸¸æˆç±» - å›½é™…è±¡æ£‹ class Chess extends Game { @Override void initialize() { System."><meta name=author content="AlfredNing"><link rel=canonical href=https://AlfredNing.github.io/note/program/design_pattern/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.519369fb6d5dea29397867e5d62729784534d3358cd473872d91542092987cfa.css integrity="sha256-UZNp+21d6ik5eGfl1icpeEU00zWM1HOHLZFUIJKYfPo=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://AlfredNing.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://AlfredNing.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://AlfredNing.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://AlfredNing.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://AlfredNing.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="è¡Œä¸ºæ¨¡å¼"><meta property="og:description" content="å®šä¹‰ å…³æ³¨ç‚¹åœ¨äºâ€œæ€æ ·è¿è¡Œå¯¹è±¡å’Œç±»â€ ç”¨æˆ·æè¿°ç¨‹åºåœ¨è¿è¡Œæ—¶å¤æ‚çš„æµç¨‹æ§åˆ¶ ç±»è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»§æ‰¿æœºåˆ¶ï¼Œå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»„åˆæˆ–èšåˆåœ¨å¯¹è±¡ä¹‹é—´åˆ†é…è¡Œä¸º æ¨¡æ¿æ–¹æ³•æ¨¡å¼ å®šä¹‰ç®—æ³•æ¡†æ¶ï¼Œç®—æ³•å…·ä½“æ¶‰åŠçš„ç›¸å…³æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼å…è®¸åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å­ç±»æ¥é‡æ–°å®šä¹‰ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ã€‚
è§’è‰² æ¨¡æ¿ç±» å…·ä½“å­ç±» é€‚ç”¨åœºæ™¯ å½“æœ‰ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶éœ€è¦ç¨³å®šä¸å˜ï¼Œä½†å…¶ä¸­çš„æŸäº›æ­¥éª¤éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œå®šåˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚ å½“å¸Œæœ›é€šè¿‡å­ç±»æ¥æ‰©å±•ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç®—æ³•æ—¶ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚ Springçš„BeanFactory, Javaçš„Servlet å®ç° package design_patterns; /** * æ¨¡æ¿æ–¹æ³•æ¨¡å¼ * * @author Alfred.Ning * @since 2023å¹´08æœˆ03æ—¥ 10:32:00 */ public class TemplateMethodMain { public static void main(String[] args) { Chess chess = new Chess(); chess.play(); new Monopoly().play(); } } // æ¨¡æ¿ç±» abstract class Game { abstract void initialize(); abstract void startGame(); abstract void endGame(); public final void play() { initialize(); startGame(); endGame(); } } // å…·ä½“æ¸¸æˆç±» - å›½é™…è±¡æ£‹ class Chess extends Game { @Override void initialize() { System."><meta property="og:type" content="article"><meta property="og:url" content="https://AlfredNing.github.io/note/program/design_pattern/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"><meta property="article:section" content="note"><meta property="article:published_time" content="2023-08-03T10:19:40+08:00"><meta property="article:modified_time" content="2023-08-03T05:29:39+00:00"><meta property="og:site_name" content="Alfred.Ning"><meta name=twitter:card content="summary"><meta name=twitter:title content="è¡Œä¸ºæ¨¡å¼"><meta name=twitter:description content="å®šä¹‰ å…³æ³¨ç‚¹åœ¨äºâ€œæ€æ ·è¿è¡Œå¯¹è±¡å’Œç±»â€ ç”¨æˆ·æè¿°ç¨‹åºåœ¨è¿è¡Œæ—¶å¤æ‚çš„æµç¨‹æ§åˆ¶ ç±»è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»§æ‰¿æœºåˆ¶ï¼Œå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»„åˆæˆ–èšåˆåœ¨å¯¹è±¡ä¹‹é—´åˆ†é…è¡Œä¸º æ¨¡æ¿æ–¹æ³•æ¨¡å¼ å®šä¹‰ç®—æ³•æ¡†æ¶ï¼Œç®—æ³•å…·ä½“æ¶‰åŠçš„ç›¸å…³æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼å…è®¸åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å­ç±»æ¥é‡æ–°å®šä¹‰ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ã€‚
è§’è‰² æ¨¡æ¿ç±» å…·ä½“å­ç±» é€‚ç”¨åœºæ™¯ å½“æœ‰ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶éœ€è¦ç¨³å®šä¸å˜ï¼Œä½†å…¶ä¸­çš„æŸäº›æ­¥éª¤éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œå®šåˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚ å½“å¸Œæœ›é€šè¿‡å­ç±»æ¥æ‰©å±•ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç®—æ³•æ—¶ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚ Springçš„BeanFactory, Javaçš„Servlet å®ç° package design_patterns; /** * æ¨¡æ¿æ–¹æ³•æ¨¡å¼ * * @author Alfred.Ning * @since 2023å¹´08æœˆ03æ—¥ 10:32:00 */ public class TemplateMethodMain { public static void main(String[] args) { Chess chess = new Chess(); chess.play(); new Monopoly().play(); } } // æ¨¡æ¿ç±» abstract class Game { abstract void initialize(); abstract void startGame(); abstract void endGame(); public final void play() { initialize(); startGame(); endGame(); } } // å…·ä½“æ¸¸æˆç±» - å›½é™…è±¡æ£‹ class Chess extends Game { @Override void initialize() { System."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"ç¬”è®°","item":"https://AlfredNing.github.io/note/"},{"@type":"ListItem","position":3,"name":"ç¼–ç¨‹","item":"https://AlfredNing.github.io/note/program/"},{"@type":"ListItem","position":4,"name":"è®¾è®¡æ¨¡å¼","item":"https://AlfredNing.github.io/note/program/design_pattern/"},{"@type":"ListItem","position":5,"name":"è¡Œä¸ºæ¨¡å¼","item":"https://AlfredNing.github.io/note/program/design_pattern/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"è¡Œä¸ºæ¨¡å¼","name":"è¡Œä¸ºæ¨¡å¼","description":"å®šä¹‰ å…³æ³¨ç‚¹åœ¨äºâ€œæ€æ ·è¿è¡Œå¯¹è±¡å’Œç±»â€ ç”¨æˆ·æè¿°ç¨‹åºåœ¨è¿è¡Œæ—¶å¤æ‚çš„æµç¨‹æ§åˆ¶ ç±»è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»§æ‰¿æœºåˆ¶ï¼Œå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»„åˆæˆ–èšåˆåœ¨å¯¹è±¡ä¹‹é—´åˆ†é…è¡Œä¸º æ¨¡æ¿æ–¹æ³•æ¨¡å¼ å®šä¹‰ç®—æ³•æ¡†æ¶ï¼Œç®—æ³•å…·ä½“æ¶‰åŠçš„ç›¸å…³æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼å…è®¸åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å­ç±»æ¥é‡æ–°å®šä¹‰ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ã€‚\nè§’è‰² æ¨¡æ¿ç±» å…·ä½“å­ç±» é€‚ç”¨åœºæ™¯ å½“æœ‰ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶éœ€è¦ç¨³å®šä¸å˜ï¼Œä½†å…¶ä¸­çš„æŸäº›æ­¥éª¤éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œå®šåˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚ å½“å¸Œæœ›é€šè¿‡å­ç±»æ¥æ‰©å±•ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç®—æ³•æ—¶ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚ Springçš„BeanFactory, Javaçš„Servlet å®ç° package design_patterns; /** * æ¨¡æ¿æ–¹æ³•æ¨¡å¼ * * @author Alfred.Ning * @since 2023å¹´08æœˆ03æ—¥ 10:32:00 */ public class TemplateMethodMain { public static void main(String[] args) { Chess chess = new Chess(); chess.play(); new Monopoly().play(); } } // æ¨¡æ¿ç±» abstract class Game { abstract void initialize(); abstract void startGame(); abstract void endGame(); public final void play() { initialize(); startGame(); endGame(); } } // å…·ä½“æ¸¸æˆç±» - å›½é™…è±¡æ£‹ class Chess extends Game { @Override void initialize() { System.","keywords":[""],"articleBody":"å®šä¹‰ å…³æ³¨ç‚¹åœ¨äºâ€œæ€æ ·è¿è¡Œå¯¹è±¡å’Œç±»â€ ç”¨æˆ·æè¿°ç¨‹åºåœ¨è¿è¡Œæ—¶å¤æ‚çš„æµç¨‹æ§åˆ¶ ç±»è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»§æ‰¿æœºåˆ¶ï¼Œå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»„åˆæˆ–èšåˆåœ¨å¯¹è±¡ä¹‹é—´åˆ†é…è¡Œä¸º æ¨¡æ¿æ–¹æ³•æ¨¡å¼ å®šä¹‰ç®—æ³•æ¡†æ¶ï¼Œç®—æ³•å…·ä½“æ¶‰åŠçš„ç›¸å…³æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼å…è®¸åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å­ç±»æ¥é‡æ–°å®šä¹‰ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ã€‚\nè§’è‰² æ¨¡æ¿ç±» å…·ä½“å­ç±» é€‚ç”¨åœºæ™¯ å½“æœ‰ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶éœ€è¦ç¨³å®šä¸å˜ï¼Œä½†å…¶ä¸­çš„æŸäº›æ­¥éª¤éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œå®šåˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚ å½“å¸Œæœ›é€šè¿‡å­ç±»æ¥æ‰©å±•ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç®—æ³•æ—¶ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚ Springçš„BeanFactory, Javaçš„Servlet å®ç° package design_patterns; /** * æ¨¡æ¿æ–¹æ³•æ¨¡å¼ * * @author Alfred.Ning * @since 2023å¹´08æœˆ03æ—¥ 10:32:00 */ public class TemplateMethodMain { public static void main(String[] args) { Chess chess = new Chess(); chess.play(); new Monopoly().play(); } } // æ¨¡æ¿ç±» abstract class Game { abstract void initialize(); abstract void startGame(); abstract void endGame(); public final void play() { initialize(); startGame(); endGame(); } } // å…·ä½“æ¸¸æˆç±» - å›½é™…è±¡æ£‹ class Chess extends Game { @Override void initialize() { System.out.println(\"åˆå§‹åŒ–å›½é™…è±¡æ£‹æ¸¸æˆ\"); } @Override void startGame() { System.out.println(\"å¼€å§‹å›½é™…è±¡æ£‹æ¸¸æˆ\"); } @Override void endGame() { System.out.println(\"ç»“æŸå›½é™…è±¡æ£‹æ¸¸æˆ\"); } } // å…·ä½“æ¸¸æˆç±» - å¤§å¯Œç¿ class Monopoly extends Game { @Override void initialize() { System.out.println(\"åˆå§‹åŒ–å¤§å¯Œç¿æ¸¸æˆ\"); } @Override void startGame() { System.out.println(\"å¼€å§‹å¤§å¯Œç¿æ¸¸æˆ\"); } @Override void endGame() { System.out.println(\"ç»“æŸå¤§å¯Œç¿æ¸¸æˆ\"); } } ç­–ç•¥æ¨¡å¼ å®¢æˆ·ç«¯å’Œç®—æ³•ä¹‹é—´ç›¸äº’è§£è€¦ å®¢æˆ·ç«¯è¿è¡Œæ—¶é€‰æ‹©ä¸åŒçš„ç®—æ³•ï¼Œæ— éœ€ä¿®æ”¹ä»£ç  è§’è‰² ç­–ç•¥æ¥å£ å…·ä½“ç­–ç•¥ç±» ä¸Šä¸‹æ–‡ç±» ä½¿ç”¨åœºæ™¯ å½“ä¸€ä¸ªç±»æœ‰å¤šç§ç®—æ³•æˆ–è¡Œä¸ºï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°é€‰æ‹©å…¶ä¸­ä¸€ç§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼ã€‚ å½“ä¸€ä¸ªç±»çš„ç®—æ³•æ¶‰åŠå¤æ‚çš„æ¡ä»¶è¯­å¥ï¼Œå¯ä»¥é€šè¿‡ç­–ç•¥æ¨¡å¼å°†ä¸åŒçš„ç®—æ³•æŠ½è±¡å‡ºæ¥ï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ã€‚ çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥ å®ç° /** * ç­–ç•¥æ¨¡å¼ * * @author Alfred.Ning * @since 2023å¹´08æœˆ03æ—¥ 11:51:00 */ public class StrategyMain { public static void main(String[] args) { ShopCart shoppingCart = new ShopCart(); double originalPrice = 100.0; // è®¾ç½®æ™®é€šä¼šå‘˜ç­–ç•¥ shoppingCart.setDiscountStrategy(new RegularCustomerDiscount()); double totalPriceForRegularCustomer = shoppingCart.calculateTotalPrice(originalPrice); System.out.println(\"Total price for regular customer: \" + totalPriceForRegularCustomer); // è®¾ç½®é«˜çº§ä¼šå‘˜ç­–ç•¥ shoppingCart.setDiscountStrategy(new PremiumCustomerDiscount()); double totalPriceForPremiumCustomer = shoppingCart.calculateTotalPrice(originalPrice); System.out.println(\"Total price for premium customer: \" + totalPriceForPremiumCustomer); // è®¾ç½®è¶…çº§ä¼šå‘˜ç­–ç•¥ shoppingCart.setDiscountStrategy(new SuperCustomerDiscount()); double totalPriceForSuperCustomer = shoppingCart.calculateTotalPrice(originalPrice); System.out.println(\"Total price for super customer: \" + totalPriceForSuperCustomer); } } // ä¸Šä¸‹æ–‡ class ShopCart { private DiscountStrategy discountStrategy; public void setDiscountStrategy(DiscountStrategy discountStrategy) { this.discountStrategy = discountStrategy; } public double calculateTotalPrice(double originPrice) { return discountStrategy.applyDiscount(originPrice); } } // ç­–ç•¥æ¥å£ interface DiscountStrategy { double applyDiscount(double originPrice); } // æ™®é€šä¼šå‘˜å®ç° class RegularCustomerDiscount implements DiscountStrategy { @Override public double applyDiscount(double originPrice) { return originPrice; } } // é«˜çº§ä¼šå‘˜æŠ˜æ‰£ç­–ç•¥ class PremiumCustomerDiscount implements DiscountStrategy { @Override public double applyDiscount(double originalPrice) { // é«˜çº§ä¼šå‘˜äº«å—9æŠ˜ä¼˜æƒ  return originalPrice * 0.9; } } // è¶…çº§ä¼šå‘˜ class SuperCustomerDiscount implements DiscountStrategy { @Override public double applyDiscount(double originPrice) { return originPrice * 0.8; } } çŠ¶æ€æ¨¡å¼ å®ƒå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºï¼Œä½¿å¾—å¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å…¶ç±»ã€‚çŠ¶æ€æ¨¡å¼å°†å¯¹è±¡çš„è¡Œä¸ºåŒ…è£…åœ¨ä¸åŒçš„çŠ¶æ€å¯¹è±¡ä¸­ï¼Œä½¿å¾—å¯¹è±¡çš„è¡Œä¸ºå¯ä»¥æ ¹æ®å†…éƒ¨çŠ¶æ€çš„æ”¹å˜è€Œæ”¹å˜ï¼Œè€Œæ— éœ€ä¿®æ”¹å¯¹è±¡æœ¬èº«çš„ä»£ç ã€‚\nä¸ç­–ç•¥æ¨¡å¼æœ€å¤§çš„ä¸åŒåœ¨äºå†…éƒ¨å­˜åœ¨çŠ¶æ€çš„æ”¹å˜\nè§’è‰² ç¯å¢ƒç±» çŠ¶æ€æ¥å£ å…·ä½“çŠ¶æ€ç±» ä½¿ç”¨åœºæ™¯ å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å¯¹è±¡çš„çŠ¶æ€å¯èƒ½åœ¨è¿è¡Œæ—¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨çŠ¶æ€æ¨¡å¼ã€‚ å½“å¯¹è±¡æœ‰å¾ˆå¤šçŠ¶æ€ï¼Œå¹¶ä¸”æ¯ä¸ªçŠ¶æ€ä¸‹æœ‰ä¸åŒçš„è¡Œä¸ºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨çŠ¶æ€æ¨¡å¼æ¥å°è£…çŠ¶æ€çš„è¡Œä¸ºï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°å’Œæ˜“äºæ‰©å±•ã€‚ å®ç° /** * çŠ¶æ€æ¨¡å¼ * * @author Alfred.Ning * @since 2023å¹´08æœˆ03æ—¥ 12:08:00 */ public class StateMain { public static void main(String[] args) { Elevator elevator = new Elevator(); elevator.goUp(); elevator.pause(); elevator.setCurrentState(new RunningState()); elevator.goUp(); elevator.goDown(); elevator.setCurrentState(new StopState()); elevator.pause(); } } // ç¯å¢ƒç±» class Elevator { private ElevatorState currentState; public Elevator() { currentState = new StopState(); } public void setCurrentState(ElevatorState currentState) { this.currentState = currentState; } public void goUp() { this.currentState.goUp(); } public void goDown() { this.currentState.goDown(); } public void pause() { currentState.pause(); } } // çŠ¶æ€æ¥å£ - ç”µæ¢¯ interface ElevatorState { void goUp(); void goDown(); void pause(); } // åœæ­¢çŠ¶æ€ class StopState implements ElevatorState { @Override public void goUp() { System.out.println(\"Elevator is going up.\"); } @Override public void goDown() { System.out.println(\"Elevator is going down.\"); } @Override public void pause() { System.out.println(\"Elevator is paused.\"); } } // è¿è¡ŒçŠ¶æ€ class RunningState implements ElevatorState { @Override public void goUp() { System.out.println(\"Elevator is already going up.\"); } @Override public void goDown() { System.out.println(\"Elevator is already going down.\"); } @Override public void pause() { System.out.println(\"Elevator cannot pause while running.\"); } } // æš‚åœçŠ¶æ€ class PauseState implements ElevatorState { @Override public void goUp() { System.out.println(\"Elevator is going up from pause state.\"); } @Override public void goDown() { System.out.println(\"Elevator is going down from pause state.\"); } @Override public void pause() { System.out.println(\"Elevator is already paused.\"); } } ä¸­ä»‹è€…æ¨¡å¼ é€šè¿‡å°è£…ä¸€ç³»åˆ—å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œå°†å¯¹è±¡ä¹‹é—´çš„è€¦åˆè§£è€¦ï¼Œä»è€Œä½¿å¾—å¯¹è±¡ä¹‹é—´çš„é€šä¿¡æ›´åŠ ç®€å•å’Œçµæ´»ã€‚\nä¸­ä»‹è€…æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å°è£…åœ¨ä¸€ä¸ªä¸­ä»‹è€…ä¸­ï¼Œä½¿å¾—å¯¹è±¡ä¹‹é—´ä¸å†ç›´æ¥äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ä¸­ä»‹è€…æ¥è¿›è¡Œé€šä¿¡ã€‚è¿™æ ·å¯ä»¥é™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ çµæ´»å’Œå¯ç»´æŠ¤ã€‚\nè§’è‰² ä¸­ä»‹è€… å…·ä½“ä¸­ä»‹è€… æŠ½è±¡åŒäº‹ç±» å…·ä½“åŒäº‹ç±» ä½¿ç”¨åœºæ™¯ å½“ä¸€ä¸ªå¯¹è±¡å’Œå…¶ä»–å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤æ‚çš„äº¤äº’å…³ç³»ï¼Œå¯¼è‡´è€¦åˆåº¦è¾ƒé«˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼æ¥ç®€åŒ–å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚ å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦å’Œå¤šä¸ªå…¶ä»–å¯¹è±¡è¿›è¡Œé€šä¿¡ï¼Œè€Œä¸”æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼æ¥å°è£…å¯¹è±¡ä¹‹é—´çš„äº¤äº’é€»è¾‘ã€‚ å®ç° import java.util.ArrayList; import java.util.List; /** * @author Alfred.Ning * @since 2023å¹´08æœˆ03æ—¥ 12:45:00 */ public class MediatorMain { public static void main(String[] args) { ChatRoom chatRoom = new ChatRoom(); ChatUser u1 = new ChatUser(chatRoom, \"user01\"); chatRoom.addUser(u1); chatRoom.addUser(new ChatUser(chatRoom, \"user02\")); chatRoom.addUser(new ChatUser(chatRoom, \"user03\")); u1.sendMessage(\"Hello everyOne\"); } } // ä¸­ä»‹è€…æ¥å£ interface ChatMediator { void sendMessage(String message, User user); } // æŠ½è±¡åŒäº‹ç±» abstract class User { protected ChatMediator mediator; protected String name; public User(ChatMediator mediator, String name) { this.mediator = mediator; this.name = name; } public abstract void sendMessage(String message); public abstract void receiveMessage(String message); } // å…·ä½“ä¸­ä»‹è€… class ChatRoom implements ChatMediator { private List\u003cUser\u003e users; public ChatRoom() { users = new ArrayList\u003c\u003e(); } @Override public void sendMessage(String message, User user) { for (User u : users) { if (u != user) { u.receiveMessage(message); } } } public void addUser(User user) { users.add(user); } } // å…·ä½“åŒäº‹ç±» class ChatUser extends User { public ChatUser(ChatMediator chatMediator, String name) { super(chatMediator, name); } @Override public void sendMessage(String message) { System.out.println(name + \" å‘é€æ¶ˆæ¯: \" + message); mediator.sendMessage(message, this); } @Override public void receiveMessage(String message) { System.out.println(name + \" æ¥æ”¶æ¶ˆæ¯: \" + message); } } è§‚å¯Ÿè€…æ¨¡å¼ å®šä¹‰å¯¹è±¡çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚å‘å¸ƒ-è®¢é˜…ï¼Œæ¨¡å‹-è§†å›¾\nè§’è‰² ä¸»é¢˜ å…·ä½“ä¸»é¢˜ è§‚å¯Ÿè€… å…·ä½“è§‚å¯Ÿè€… ä½¿ç”¨åœºæ™¯ å½“ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜éœ€è¦åŒæ—¶æ”¹å˜å…¶ä»–å¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚ å½“ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œä½†åˆå¸Œæœ›å°½é‡é¿å…ä¸è¢«é€šçŸ¥å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚ å½“ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼å°†è¿™ä¸¤è€…è§£è€¦ã€‚ Springäº‹ä»¶æœºåˆ¶ã€Vueçš„åŒå‘ç»‘å®šã€å“åº”å¼ç¼–ç¨‹ å®ç° import java.util.ArrayList; import java.util.List; /** * è§‚å¯Ÿè€…æ¨¡å¼ * * @author Alfred.Ning * @since 2023å¹´08æœˆ03æ—¥ 13:22:00 */ public class ObserverMain { public static void main(String[] args) { WeatherStation weatherStation = new WeatherStation(); DisplayBoard displayBoard = new DisplayBoard(); Logger logger = new Logger(); weatherStation.addObserver(logger); weatherStation.addObserver(displayBoard); weatherStation.setTemperature(25.6f); } } // è§‚å¯Ÿè€… interface Observer { void update(float temperature); } // å…·ä½“è§‚å¯Ÿè€… - æ˜¾ç¤ºæ¿ class DisplayBoard implements Observer { @Override public void update(float temperature) { System.out.println(\"DisplayBoard Temperature updated to \" + temperature); } } // å…·ä½“è§‚å¯Ÿè€… - æ—¥å¿— class Logger implements Observer { @Override public void update(float temperature) { System.out.println(\"Logger: Temperature updated to \" + temperature); } } // ä¸»é¢˜ interface Subject { void addObserver(Observer observer); void removeObserver(Observer observer); void notifyObserver(); } // å…·ä½“ä¸»é¢˜ class WeatherStation implements Subject { private List\u003cObserver\u003e observers; private float temperature; public WeatherStation() { observers = new ArrayList\u003c\u003e(); } public void setTemperature(float temperature) { this.temperature = temperature; notifyObserver(); } @Override public void addObserver(Observer observer) { observers.add(observer); } @Override public void removeObserver(Observer observer) { observers.remove(observer); } @Override public void notifyObserver() { for (Observer observer : observers) { observer.update(this.temperature); } } } ","wordCount":"936","inLanguage":"zh","datePublished":"2023-08-03T10:19:40+08:00","dateModified":"2023-08-03T05:29:39.648262934Z","author":[{"@type":"Person","name":"AlfredNing"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://AlfredNing.github.io/note/program/design_pattern/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"},"publisher":{"@type":"Organization","name":"AlfredNing","logo":{"@type":"ImageObject","url":"https://AlfredNing.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://AlfredNing.github.io accesskey=h title="AlfredNing (Alt + H)">AlfredNing</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://AlfredNing.github.io/note/ title=ğŸ““ç¬”è®°><span>ğŸ““ç¬”è®°</span></a></li><li><a href=https://AlfredNing.github.io/thinking/ title=ğŸ¤”é»‘æ´><span>ğŸ¤”é»‘æ´</span></a></li><li><a href=https://AlfredNing.github.io/search/ title="ğŸ”æœç´¢ (Alt + /)" accesskey=/><span>ğŸ”æœç´¢</span></a></li><li><a href=https://AlfredNing.github.io/tags/ title=ğŸ·ï¸æ ‡ç­¾><span>ğŸ·ï¸æ ‡ç­¾</span></a></li><li><a href=https://AlfredNing.github.io/archives title=ğŸ—„ï¸å½’æ¡£><span>ğŸ—„ï¸å½’æ¡£</span></a></li><li><a href=https://AlfredNing.github.io/about title=ğŸ¤™å…³äº><span>ğŸ¤™å…³äº</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://AlfredNing.github.io>ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://AlfredNing.github.io/note/>ç¬”è®°</a>&nbsp;Â»&nbsp;<a href=https://AlfredNing.github.io/note/program/>ç¼–ç¨‹</a>&nbsp;Â»&nbsp;<a href=https://AlfredNing.github.io/note/program/design_pattern/>è®¾è®¡æ¨¡å¼</a></div><h1 class=post-title>è¡Œä¸ºæ¨¡å¼</h1><div class=post-meta>åˆ›å»º:&nbsp;<span title='2023-08-03 10:19:40 +0800 +0800'>2023å¹´-08æœˆ-03æ—¥</span>&nbsp;|&nbsp;æ›´æ–°:&nbsp;2023å¹´-08æœˆ-03æ—¥&nbsp;|&nbsp;å­—æ•°:&nbsp;936å­—&nbsp;|&nbsp;æ—¶é•¿:&nbsp;5åˆ†é’Ÿ&nbsp;|&nbsp;AlfredNing
&nbsp;|&nbsp;æ ‡ç­¾: &nbsp;<ul class=post-tags-meta><a href=https://AlfredNing.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/>è®¾è®¡æ¨¡å¼</a></ul></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e5%ae%9a%e4%b9%89 aria-label=å®šä¹‰>å®šä¹‰</a></li><li><a href=#%e6%a8%a1%e6%9d%bf%e6%96%b9%e6%b3%95%e6%a8%a1%e5%bc%8f aria-label=æ¨¡æ¿æ–¹æ³•æ¨¡å¼>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a><ul><li><a href=#%e8%a7%92%e8%89%b2 aria-label=è§’è‰²>è§’è‰²</a></li><li><a href=#%e9%80%82%e7%94%a8%e5%9c%ba%e6%99%af aria-label=é€‚ç”¨åœºæ™¯>é€‚ç”¨åœºæ™¯</a></li><li><a href=#%e5%ae%9e%e7%8e%b0 aria-label=å®ç°>å®ç°</a></li></ul></li><li><a href=#%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f aria-label=ç­–ç•¥æ¨¡å¼>ç­–ç•¥æ¨¡å¼</a><ul><li><a href=#%e8%a7%92%e8%89%b2-1 aria-label=è§’è‰²>è§’è‰²</a></li><li><a href=#%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af aria-label=ä½¿ç”¨åœºæ™¯>ä½¿ç”¨åœºæ™¯</a></li><li><a href=#%e5%ae%9e%e7%8e%b0-1 aria-label=å®ç°>å®ç°</a></li></ul></li><li><a href=#%e7%8a%b6%e6%80%81%e6%a8%a1%e5%bc%8f aria-label=çŠ¶æ€æ¨¡å¼>çŠ¶æ€æ¨¡å¼</a><ul><li><a href=#%e8%a7%92%e8%89%b2-2 aria-label=è§’è‰²>è§’è‰²</a></li><li><a href=#%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af-1 aria-label=ä½¿ç”¨åœºæ™¯>ä½¿ç”¨åœºæ™¯</a></li><li><a href=#%e5%ae%9e%e7%8e%b0-2 aria-label=å®ç°>å®ç°</a></li></ul></li><li><a href=#%e4%b8%ad%e4%bb%8b%e8%80%85%e6%a8%a1%e5%bc%8f aria-label=ä¸­ä»‹è€…æ¨¡å¼>ä¸­ä»‹è€…æ¨¡å¼</a><ul><li><a href=#%e8%a7%92%e8%89%b2-3 aria-label=è§’è‰²>è§’è‰²</a></li><li><a href=#%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af-2 aria-label=ä½¿ç”¨åœºæ™¯>ä½¿ç”¨åœºæ™¯</a></li><li><a href=#%e5%ae%9e%e7%8e%b0-3 aria-label=å®ç°>å®ç°</a></li></ul></li><li><a href=#%e8%a7%82%e5%af%9f%e8%80%85%e6%a8%a1%e5%bc%8f aria-label=è§‚å¯Ÿè€…æ¨¡å¼>è§‚å¯Ÿè€…æ¨¡å¼</a><ul><li><a href=#%e8%a7%92%e8%89%b2-4 aria-label=è§’è‰²>è§’è‰²</a></li><li><a href=#%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af-3 aria-label=ä½¿ç”¨åœºæ™¯>ä½¿ç”¨åœºæ™¯</a></li><li><a href=#%e5%ae%9e%e7%8e%b0-4 aria-label=å®ç°>å®ç°</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=å®šä¹‰>å®šä¹‰<a hidden class=anchor aria-hidden=true href=#å®šä¹‰>#</a></h1><ul><li>å…³æ³¨ç‚¹åœ¨äºâ€œæ€æ ·è¿è¡Œå¯¹è±¡å’Œç±»â€</li><li>ç”¨æˆ·æè¿°ç¨‹åºåœ¨è¿è¡Œæ—¶å¤æ‚çš„æµç¨‹æ§åˆ¶</li><li>ç±»è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»§æ‰¿æœºåˆ¶ï¼Œå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼šé‡‡ç”¨ç»„åˆæˆ–èšåˆåœ¨å¯¹è±¡ä¹‹é—´åˆ†é…è¡Œä¸º</li></ul><h1 id=æ¨¡æ¿æ–¹æ³•æ¨¡å¼>æ¨¡æ¿æ–¹æ³•æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#æ¨¡æ¿æ–¹æ³•æ¨¡å¼>#</a></h1><p>å®šä¹‰ç®—æ³•æ¡†æ¶ï¼Œç®—æ³•å…·ä½“æ¶‰åŠçš„ç›¸å…³æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼å…è®¸åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å­ç±»æ¥é‡æ–°å®šä¹‰ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ã€‚</p><h2 id=è§’è‰²>è§’è‰²<a hidden class=anchor aria-hidden=true href=#è§’è‰²>#</a></h2><ul><li>æ¨¡æ¿ç±»</li><li>å…·ä½“å­ç±»</li></ul><h2 id=é€‚ç”¨åœºæ™¯>é€‚ç”¨åœºæ™¯<a hidden class=anchor aria-hidden=true href=#é€‚ç”¨åœºæ™¯>#</a></h2><ul><li>å½“æœ‰ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶éœ€è¦ç¨³å®šä¸å˜ï¼Œä½†å…¶ä¸­çš„æŸäº›æ­¥éª¤éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œå®šåˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚</li><li>å½“å¸Œæœ›é€šè¿‡å­ç±»æ¥æ‰©å±•ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç®—æ³•æ—¶ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚</li><li>Springçš„BeanFactory, Javaçš„Servlet</li></ul><h2 id=å®ç°>å®ç°<a hidden class=anchor aria-hidden=true href=#å®ç°>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>design_patterns</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * æ¨¡æ¿æ–¹æ³•æ¨¡å¼
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * @author Alfred.Ning
</span></span></span><span class=line><span class=cl><span class=cm> * @since 2023å¹´08æœˆ03æ—¥ 10:32:00
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>TemplateMethodMain</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Chess</span> <span class=n>chess</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Chess</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>chess</span><span class=o>.</span><span class=na>play</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Monopoly</span><span class=o>().</span><span class=na>play</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ¨¡æ¿ç±»
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Game</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>initialize</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>startGame</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>endGame</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>final</span> <span class=kt>void</span> <span class=nf>play</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>initialize</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>startGame</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>endGame</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…·ä½“æ¸¸æˆç±» - å›½é™…è±¡æ£‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>Chess</span> <span class=kd>extends</span> <span class=n>Game</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>initialize</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;åˆå§‹åŒ–å›½é™…è±¡æ£‹æ¸¸æˆ&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>startGame</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;å¼€å§‹å›½é™…è±¡æ£‹æ¸¸æˆ&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>endGame</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ç»“æŸå›½é™…è±¡æ£‹æ¸¸æˆ&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…·ä½“æ¸¸æˆç±» - å¤§å¯Œç¿
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>Monopoly</span> <span class=kd>extends</span> <span class=n>Game</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>initialize</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;åˆå§‹åŒ–å¤§å¯Œç¿æ¸¸æˆ&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>startGame</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;å¼€å§‹å¤§å¯Œç¿æ¸¸æˆ&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>endGame</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ç»“æŸå¤§å¯Œç¿æ¸¸æˆ&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h1 id=ç­–ç•¥æ¨¡å¼>ç­–ç•¥æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#ç­–ç•¥æ¨¡å¼>#</a></h1><ul><li>å®¢æˆ·ç«¯å’Œç®—æ³•ä¹‹é—´ç›¸äº’è§£è€¦</li><li>å®¢æˆ·ç«¯è¿è¡Œæ—¶é€‰æ‹©ä¸åŒçš„ç®—æ³•ï¼Œæ— éœ€ä¿®æ”¹ä»£ç </li></ul><h2 id=è§’è‰²-1>è§’è‰²<a hidden class=anchor aria-hidden=true href=#è§’è‰²-1>#</a></h2><ul><li>ç­–ç•¥æ¥å£</li><li>å…·ä½“ç­–ç•¥ç±»</li><li>ä¸Šä¸‹æ–‡ç±»</li></ul><h2 id=ä½¿ç”¨åœºæ™¯>ä½¿ç”¨åœºæ™¯<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨åœºæ™¯>#</a></h2><ul><li>å½“ä¸€ä¸ªç±»æœ‰å¤šç§ç®—æ³•æˆ–è¡Œä¸ºï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°é€‰æ‹©å…¶ä¸­ä¸€ç§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼ã€‚</li><li>å½“ä¸€ä¸ªç±»çš„ç®—æ³•æ¶‰åŠå¤æ‚çš„æ¡ä»¶è¯­å¥ï¼Œå¯ä»¥é€šè¿‡ç­–ç•¥æ¨¡å¼å°†ä¸åŒçš„ç®—æ³•æŠ½è±¡å‡ºæ¥ï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ã€‚</li><li>çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥</li></ul><h2 id=å®ç°-1>å®ç°<a hidden class=anchor aria-hidden=true href=#å®ç°-1>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * ç­–ç•¥æ¨¡å¼
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * @author Alfred.Ning
</span></span></span><span class=line><span class=cl><span class=cm> * @since 2023å¹´08æœˆ03æ—¥ 11:51:00
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>StrategyMain</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ShopCart</span> <span class=n>shoppingCart</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ShopCart</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>originalPrice</span> <span class=o>=</span> <span class=n>100</span><span class=o>.</span><span class=na>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// è®¾ç½®æ™®é€šä¼šå‘˜ç­–ç•¥
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>shoppingCart</span><span class=o>.</span><span class=na>setDiscountStrategy</span><span class=o>(</span><span class=k>new</span> <span class=n>RegularCustomerDiscount</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>totalPriceForRegularCustomer</span> <span class=o>=</span> <span class=n>shoppingCart</span><span class=o>.</span><span class=na>calculateTotalPrice</span><span class=o>(</span><span class=n>originalPrice</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Total price for regular customer: &#34;</span> <span class=o>+</span> <span class=n>totalPriceForRegularCustomer</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// è®¾ç½®é«˜çº§ä¼šå‘˜ç­–ç•¥
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>shoppingCart</span><span class=o>.</span><span class=na>setDiscountStrategy</span><span class=o>(</span><span class=k>new</span> <span class=n>PremiumCustomerDiscount</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>totalPriceForPremiumCustomer</span> <span class=o>=</span> <span class=n>shoppingCart</span><span class=o>.</span><span class=na>calculateTotalPrice</span><span class=o>(</span><span class=n>originalPrice</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Total price for premium customer: &#34;</span> <span class=o>+</span> <span class=n>totalPriceForPremiumCustomer</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// è®¾ç½®è¶…çº§ä¼šå‘˜ç­–ç•¥
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>shoppingCart</span><span class=o>.</span><span class=na>setDiscountStrategy</span><span class=o>(</span><span class=k>new</span> <span class=n>SuperCustomerDiscount</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>totalPriceForSuperCustomer</span> <span class=o>=</span> <span class=n>shoppingCart</span><span class=o>.</span><span class=na>calculateTotalPrice</span><span class=o>(</span><span class=n>originalPrice</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Total price for super customer: &#34;</span> <span class=o>+</span> <span class=n>totalPriceForSuperCustomer</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä¸Šä¸‹æ–‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>ShopCart</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>DiscountStrategy</span> <span class=n>discountStrategy</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setDiscountStrategy</span><span class=o>(</span><span class=n>DiscountStrategy</span> <span class=n>discountStrategy</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>discountStrategy</span> <span class=o>=</span> <span class=n>discountStrategy</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>double</span> <span class=nf>calculateTotalPrice</span><span class=o>(</span><span class=kt>double</span> <span class=n>originPrice</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>discountStrategy</span><span class=o>.</span><span class=na>applyDiscount</span><span class=o>(</span><span class=n>originPrice</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç­–ç•¥æ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>interface</span> <span class=nc>DiscountStrategy</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>double</span> <span class=nf>applyDiscount</span><span class=o>(</span><span class=kt>double</span> <span class=n>originPrice</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ™®é€šä¼šå‘˜å®ç°
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>RegularCustomerDiscount</span> <span class=kd>implements</span> <span class=n>DiscountStrategy</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>double</span> <span class=nf>applyDiscount</span><span class=o>(</span><span class=kt>double</span> <span class=n>originPrice</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>originPrice</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// é«˜çº§ä¼šå‘˜æŠ˜æ‰£ç­–ç•¥
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>PremiumCustomerDiscount</span> <span class=kd>implements</span> <span class=n>DiscountStrategy</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>double</span> <span class=nf>applyDiscount</span><span class=o>(</span><span class=kt>double</span> <span class=n>originalPrice</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// é«˜çº§ä¼šå‘˜äº«å—9æŠ˜ä¼˜æƒ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=n>originalPrice</span> <span class=o>*</span> <span class=n>0</span><span class=o>.</span><span class=na>9</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è¶…çº§ä¼šå‘˜
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>SuperCustomerDiscount</span> <span class=kd>implements</span> <span class=n>DiscountStrategy</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>double</span> <span class=nf>applyDiscount</span><span class=o>(</span><span class=kt>double</span> <span class=n>originPrice</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>originPrice</span> <span class=o>*</span> <span class=n>0</span><span class=o>.</span><span class=na>8</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h1 id=çŠ¶æ€æ¨¡å¼>çŠ¶æ€æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#çŠ¶æ€æ¨¡å¼>#</a></h1><p>å®ƒå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºï¼Œä½¿å¾—å¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å…¶ç±»ã€‚çŠ¶æ€æ¨¡å¼å°†å¯¹è±¡çš„è¡Œä¸ºåŒ…è£…åœ¨ä¸åŒçš„çŠ¶æ€å¯¹è±¡ä¸­ï¼Œä½¿å¾—å¯¹è±¡çš„è¡Œä¸ºå¯ä»¥æ ¹æ®å†…éƒ¨çŠ¶æ€çš„æ”¹å˜è€Œæ”¹å˜ï¼Œè€Œæ— éœ€ä¿®æ”¹å¯¹è±¡æœ¬èº«çš„ä»£ç ã€‚</p><p><strong>ä¸ç­–ç•¥æ¨¡å¼æœ€å¤§çš„ä¸åŒåœ¨äºå†…éƒ¨å­˜åœ¨çŠ¶æ€çš„æ”¹å˜</strong></p><h2 id=è§’è‰²-2>è§’è‰²<a hidden class=anchor aria-hidden=true href=#è§’è‰²-2>#</a></h2><ul><li>ç¯å¢ƒç±»</li><li>çŠ¶æ€æ¥å£</li><li>å…·ä½“çŠ¶æ€ç±»</li></ul><h2 id=ä½¿ç”¨åœºæ™¯-1>ä½¿ç”¨åœºæ™¯<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨åœºæ™¯-1>#</a></h2><ul><li>å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å¯¹è±¡çš„çŠ¶æ€å¯èƒ½åœ¨è¿è¡Œæ—¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨çŠ¶æ€æ¨¡å¼ã€‚</li><li>å½“å¯¹è±¡æœ‰å¾ˆå¤šçŠ¶æ€ï¼Œå¹¶ä¸”æ¯ä¸ªçŠ¶æ€ä¸‹æœ‰ä¸åŒçš„è¡Œä¸ºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨çŠ¶æ€æ¨¡å¼æ¥å°è£…çŠ¶æ€çš„è¡Œä¸ºï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°å’Œæ˜“äºæ‰©å±•ã€‚</li></ul><h2 id=å®ç°-2>å®ç°<a hidden class=anchor aria-hidden=true href=#å®ç°-2>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * çŠ¶æ€æ¨¡å¼
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * @author Alfred.Ning
</span></span></span><span class=line><span class=cl><span class=cm> * @since 2023å¹´08æœˆ03æ—¥ 12:08:00
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>StateMain</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Elevator</span> <span class=n>elevator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Elevator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>elevator</span><span class=o>.</span><span class=na>goUp</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>elevator</span><span class=o>.</span><span class=na>pause</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>elevator</span><span class=o>.</span><span class=na>setCurrentState</span><span class=o>(</span><span class=k>new</span> <span class=n>RunningState</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>elevator</span><span class=o>.</span><span class=na>goUp</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>elevator</span><span class=o>.</span><span class=na>goDown</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>elevator</span><span class=o>.</span><span class=na>setCurrentState</span><span class=o>(</span><span class=k>new</span> <span class=n>StopState</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>elevator</span><span class=o>.</span><span class=na>pause</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç¯å¢ƒç±»
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>Elevator</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>ElevatorState</span> <span class=n>currentState</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=nf>Elevator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>currentState</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StopState</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setCurrentState</span><span class=o>(</span><span class=n>ElevatorState</span> <span class=n>currentState</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>currentState</span> <span class=o>=</span> <span class=n>currentState</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>goUp</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>currentState</span><span class=o>.</span><span class=na>goUp</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>goDown</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>currentState</span><span class=o>.</span><span class=na>goDown</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>pause</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>currentState</span><span class=o>.</span><span class=na>pause</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// çŠ¶æ€æ¥å£ - ç”µæ¢¯
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>interface</span> <span class=nc>ElevatorState</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>goUp</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>goDown</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>pause</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// åœæ­¢çŠ¶æ€
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>StopState</span> <span class=kd>implements</span> <span class=n>ElevatorState</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>goUp</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Elevator is going up.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>goDown</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Elevator is going down.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>pause</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Elevator is paused.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è¿è¡ŒçŠ¶æ€
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>RunningState</span> <span class=kd>implements</span> <span class=n>ElevatorState</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>goUp</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Elevator is already going up.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>goDown</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Elevator is already going down.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>pause</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Elevator cannot pause while running.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æš‚åœçŠ¶æ€
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>PauseState</span> <span class=kd>implements</span> <span class=n>ElevatorState</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>goUp</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Elevator is going up from pause state.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>goDown</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Elevator is going down from pause state.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>pause</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Elevator is already paused.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h1 id=ä¸­ä»‹è€…æ¨¡å¼>ä¸­ä»‹è€…æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#ä¸­ä»‹è€…æ¨¡å¼>#</a></h1><p>é€šè¿‡å°è£…ä¸€ç³»åˆ—å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œå°†å¯¹è±¡ä¹‹é—´çš„è€¦åˆè§£è€¦ï¼Œä»è€Œä½¿å¾—å¯¹è±¡ä¹‹é—´çš„é€šä¿¡æ›´åŠ ç®€å•å’Œçµæ´»ã€‚</p><p>ä¸­ä»‹è€…æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å°è£…åœ¨ä¸€ä¸ªä¸­ä»‹è€…ä¸­ï¼Œä½¿å¾—å¯¹è±¡ä¹‹é—´ä¸å†ç›´æ¥äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ä¸­ä»‹è€…æ¥è¿›è¡Œé€šä¿¡ã€‚è¿™æ ·å¯ä»¥é™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ çµæ´»å’Œå¯ç»´æŠ¤ã€‚</p><h2 id=è§’è‰²-3>è§’è‰²<a hidden class=anchor aria-hidden=true href=#è§’è‰²-3>#</a></h2><ul><li>ä¸­ä»‹è€…</li><li>å…·ä½“ä¸­ä»‹è€…</li><li>æŠ½è±¡åŒäº‹ç±»</li><li>å…·ä½“åŒäº‹ç±»</li></ul><h2 id=ä½¿ç”¨åœºæ™¯-2>ä½¿ç”¨åœºæ™¯<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨åœºæ™¯-2>#</a></h2><ul><li>å½“ä¸€ä¸ªå¯¹è±¡å’Œå…¶ä»–å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤æ‚çš„äº¤äº’å…³ç³»ï¼Œå¯¼è‡´è€¦åˆåº¦è¾ƒé«˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼æ¥ç®€åŒ–å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚</li><li>å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦å’Œå¤šä¸ªå…¶ä»–å¯¹è±¡è¿›è¡Œé€šä¿¡ï¼Œè€Œä¸”æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼æ¥å°è£…å¯¹è±¡ä¹‹é—´çš„äº¤äº’é€»è¾‘ã€‚</li></ul><h2 id=å®ç°-3>å®ç°<a hidden class=anchor aria-hidden=true href=#å®ç°-3>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @author Alfred.Ning
</span></span></span><span class=line><span class=cl><span class=cm> * @since 2023å¹´08æœˆ03æ—¥ 12:45:00
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>MediatorMain</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ChatRoom</span> <span class=n>chatRoom</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ChatRoom</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>ChatUser</span> <span class=n>u1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ChatUser</span><span class=o>(</span><span class=n>chatRoom</span><span class=o>,</span> <span class=s>&#34;user01&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>chatRoom</span><span class=o>.</span><span class=na>addUser</span><span class=o>(</span><span class=n>u1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>chatRoom</span><span class=o>.</span><span class=na>addUser</span><span class=o>(</span><span class=k>new</span> <span class=n>ChatUser</span><span class=o>(</span><span class=n>chatRoom</span><span class=o>,</span> <span class=s>&#34;user02&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>chatRoom</span><span class=o>.</span><span class=na>addUser</span><span class=o>(</span><span class=k>new</span> <span class=n>ChatUser</span><span class=o>(</span><span class=n>chatRoom</span><span class=o>,</span> <span class=s>&#34;user03&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>u1</span><span class=o>.</span><span class=na>sendMessage</span><span class=o>(</span><span class=s>&#34;Hello everyOne&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä¸­ä»‹è€…æ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>interface</span> <span class=nc>ChatMediator</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>sendMessage</span><span class=o>(</span><span class=n>String</span> <span class=n>message</span><span class=o>,</span> <span class=n>User</span> <span class=n>user</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æŠ½è±¡åŒäº‹ç±»
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>User</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>protected</span> <span class=n>ChatMediator</span> <span class=n>mediator</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>protected</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=nf>User</span><span class=o>(</span><span class=n>ChatMediator</span> <span class=n>mediator</span><span class=o>,</span> <span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>mediator</span> <span class=o>=</span> <span class=n>mediator</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>sendMessage</span><span class=o>(</span><span class=n>String</span> <span class=n>message</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>receiveMessage</span><span class=o>(</span><span class=n>String</span> <span class=n>message</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…·ä½“ä¸­ä»‹è€…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>ChatRoom</span> <span class=kd>implements</span> <span class=n>ChatMediator</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=n>users</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=nf>ChatRoom</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>users</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>sendMessage</span><span class=o>(</span><span class=n>String</span> <span class=n>message</span><span class=o>,</span> <span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=n>User</span> <span class=n>u</span> <span class=o>:</span> <span class=n>users</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=o>(</span><span class=n>u</span> <span class=o>!=</span> <span class=n>user</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>u</span><span class=o>.</span><span class=na>receiveMessage</span><span class=o>(</span><span class=n>message</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>addUser</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>users</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>user</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…·ä½“åŒäº‹ç±»
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>ChatUser</span> <span class=kd>extends</span> <span class=n>User</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=nf>ChatUser</span><span class=o>(</span><span class=n>ChatMediator</span> <span class=n>chatMediator</span><span class=o>,</span> <span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>super</span><span class=o>(</span><span class=n>chatMediator</span><span class=o>,</span> <span class=n>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>sendMessage</span><span class=o>(</span><span class=n>String</span> <span class=n>message</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>name</span> <span class=o>+</span> <span class=s>&#34; å‘é€æ¶ˆæ¯: &#34;</span> <span class=o>+</span> <span class=n>message</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>mediator</span><span class=o>.</span><span class=na>sendMessage</span><span class=o>(</span><span class=n>message</span><span class=o>,</span> <span class=k>this</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>receiveMessage</span><span class=o>(</span><span class=n>String</span> <span class=n>message</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>name</span> <span class=o>+</span> <span class=s>&#34; æ¥æ”¶æ¶ˆæ¯: &#34;</span> <span class=o>+</span> <span class=n>message</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h1 id=è§‚å¯Ÿè€…æ¨¡å¼>è§‚å¯Ÿè€…æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#è§‚å¯Ÿè€…æ¨¡å¼>#</a></h1><p>å®šä¹‰å¯¹è±¡çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚å‘å¸ƒ-è®¢é˜…ï¼Œæ¨¡å‹-è§†å›¾</p><h2 id=è§’è‰²-4>è§’è‰²<a hidden class=anchor aria-hidden=true href=#è§’è‰²-4>#</a></h2><ul><li>ä¸»é¢˜</li><li>å…·ä½“ä¸»é¢˜</li><li>è§‚å¯Ÿè€…</li><li>å…·ä½“è§‚å¯Ÿè€…</li></ul><h2 id=ä½¿ç”¨åœºæ™¯-3>ä½¿ç”¨åœºæ™¯<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨åœºæ™¯-3>#</a></h2><ul><li>å½“ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜éœ€è¦åŒæ—¶æ”¹å˜å…¶ä»–å¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚</li><li>å½“ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œä½†åˆå¸Œæœ›å°½é‡é¿å…ä¸è¢«é€šçŸ¥å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚</li><li>å½“ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼å°†è¿™ä¸¤è€…è§£è€¦ã€‚</li><li>Springäº‹ä»¶æœºåˆ¶ã€Vueçš„åŒå‘ç»‘å®šã€å“åº”å¼ç¼–ç¨‹</li></ul><h2 id=å®ç°-4>å®ç°<a hidden class=anchor aria-hidden=true href=#å®ç°-4>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * è§‚å¯Ÿè€…æ¨¡å¼
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * @author Alfred.Ning
</span></span></span><span class=line><span class=cl><span class=cm> * @since 2023å¹´08æœˆ03æ—¥ 13:22:00
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ObserverMain</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>WeatherStation</span> <span class=n>weatherStation</span> <span class=o>=</span> <span class=k>new</span> <span class=n>WeatherStation</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>DisplayBoard</span> <span class=n>displayBoard</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DisplayBoard</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Logger</span> <span class=n>logger</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Logger</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>weatherStation</span><span class=o>.</span><span class=na>addObserver</span><span class=o>(</span><span class=n>logger</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>weatherStation</span><span class=o>.</span><span class=na>addObserver</span><span class=o>(</span><span class=n>displayBoard</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>weatherStation</span><span class=o>.</span><span class=na>setTemperature</span><span class=o>(</span><span class=n>25</span><span class=o>.</span><span class=na>6f</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è§‚å¯Ÿè€…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>interface</span> <span class=nc>Observer</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>update</span><span class=o>(</span><span class=kt>float</span> <span class=n>temperature</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…·ä½“è§‚å¯Ÿè€… - æ˜¾ç¤ºæ¿
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>DisplayBoard</span> <span class=kd>implements</span> <span class=n>Observer</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>update</span><span class=o>(</span><span class=kt>float</span> <span class=n>temperature</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;DisplayBoard Temperature updated to &#34;</span> <span class=o>+</span> <span class=n>temperature</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…·ä½“è§‚å¯Ÿè€… - æ—¥å¿—
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>Logger</span> <span class=kd>implements</span> <span class=n>Observer</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>update</span><span class=o>(</span><span class=kt>float</span> <span class=n>temperature</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Logger: Temperature updated to &#34;</span> <span class=o>+</span> <span class=n>temperature</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä¸»é¢˜
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>interface</span> <span class=nc>Subject</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>addObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>observer</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>removeObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>observer</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>notifyObserver</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…·ä½“ä¸»é¢˜
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>WeatherStation</span> <span class=kd>implements</span> <span class=n>Subject</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Observer</span><span class=o>&gt;</span> <span class=n>observers</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>float</span> <span class=n>temperature</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=nf>WeatherStation</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>observers</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setTemperature</span><span class=o>(</span><span class=kt>float</span> <span class=n>temperature</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>temperature</span> <span class=o>=</span> <span class=n>temperature</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>notifyObserver</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>addObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>observer</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>observers</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>observer</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>removeObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>observer</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>observers</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=n>observer</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notifyObserver</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=n>Observer</span> <span class=n>observer</span> <span class=o>:</span> <span class=n>observers</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>observer</span><span class=o>.</span><span class=na>update</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>temperature</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div></div><footer class=post-footer><nav class=paginav><a class=next href=https://AlfredNing.github.io/note/program/design_pattern/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>ç»“æ„å‹æ¨¡å¼</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>ğŸ’¬è¯„è®º</span><hr></div><div id=tcomment></div><script src=https://utteranc.es/client.js repo=AlfredNing/AlfredNing.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></article></main><footer class=footer><span>&copy; 2023 <a href=https://AlfredNing.github.io>AlfredNing</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="å¤åˆ¶";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>